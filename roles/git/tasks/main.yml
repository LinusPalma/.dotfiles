---
- name: install git
  package:
    name: git
    state: present
  become: yes
  tags: [server, client]
  when: ansible_distribution in ["Ubuntu", "Archlinux"]

- name: Install git (fedora)
  # ansible.builtin.dnf:
  ansible.builtin.dnf:
    name: git
    state: present
    use_backend: dnf4
  become: yes
  tags: [server, client]

  when: ansible_distribution == "Fedora"

  #
# - name: Symlink git config
#   template:
#     src: "{{ ansible_env.HOME }}/.dotfiles/git/gitconfig.j2"
#     dest: "{{ ansible_env.HOME }}/.gitconfig"
#   tags: [common]

- name: create git config (template)
  template:
    src: gitconfig.j2
    dest: "{{ ansible_env.HOME }}/.gitconfig"
  tags: [server, client]
